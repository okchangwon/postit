!function(t){function e(e){for(var n,s,a=e[0],u=e[1],l=e[2],c=0,f=[];c<a.length;c++)s=a[c],o[s]&&f.push(o[s][0]),o[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);for(h&&h(e);f.length;)f.shift()();return r.push.apply(r,l||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,a=1;a<i.length;a++){var u=i[a];0!==o[u]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},o={1:0};var r=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var a=window.webpackJsonp=window.webpackJsonp||[],u=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var h=u;r.push([11,0]),i()}([,,function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1),s=(n=r)&&n.__esModule?n:{default:n};var a=[],u=function(e){function i(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return a.push(t),t._init(),t._caching(),t._activate(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,s.default),o(i,[{key:"_init",value:function(){this._offset={},this._options=this._getOptions(),this._visible=!1}},{key:"_caching",value:function(){this._$window=t(window),this._$document=t(document),this._$el=t(this._options.selector).eq(0)}},{key:"_activate",value:function(){this._$window.on("mousedown",this._onMousedownWindow.bind(this)),this._$window.on("resize",this._onResizeWindow.bind(this)),this._$el.on("click contextmenu","._btn",this._onClickBtn.bind(this))}},{key:"_onMousedownWindow",value:function(e){t(e.target).closest(this._options.selector).length||this._visible&&this.hide()}},{key:"_onResizeWindow",value:function(){this._visible&&this._adjustPosition()}},{key:"_onClickBtn",value:function(e){var i=t(e.target).data("code");this.hide(),this.emit(i,e),e.preventDefault()}},{key:"_setPosition",value:function(t){var e=this._$document.width(),i=this._$document.height(),n=this._$el.width(),o=this._$el.height(),r=t.left>e-n?t.left-n:t.left,s=t.top>i-o?t.top-o:t.top;this._offset={left:r,top:s},this._$el.css(this._offset)}},{key:"_adjustPosition",value:function(){var t=this._$document.width(),e=this._$document.height(),i=this._$el.width(),n=this._$el.height(),o=Math.min(this._offset.left,t-i),r=Math.min(this._offset.top,e-n);this._offset={left:o,top:r},this._$el.css(this._offset)}},{key:"isVisible",value:function(){return this._visible}},{key:"getOffset",value:function(){return this._offset}},{key:"show",value:function(t){var e=t.offset;this._visible=!0,this._setPosition(e),this._$el.stop().slideDown(50)}},{key:"hide",value:function(){this._visible&&(this._visible=!1,this._$el.fadeOut(150))}}]),i}();e.default=u}).call(this,i(0))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1),s=(n=r)&&n.__esModule?n:{default:n};var a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._init(),t._caching(),t._activate(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,[{key:"_init",value:function(){}},{key:"_caching",value:function(){}},{key:"_activate",value:function(){}},{key:"_getOffsetFromEvent",value:function(t){return{left:t.clientX,top:t.clientY}}}]),e}();e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},s=i(2),a=(n=s)&&n.__esModule?n:{default:n};var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"_getOptions",value:function(){return{selector:"._postit_contextmenu"}}},{key:"_caching",value:function(){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_caching",this).call(this),this._$textColor=this._$el.find("._textColor"),this._$textSize=this._$el.find("._textSize"),this._$bgColor=this._$el.find("._bgColor"),this._$fold=this._$el.find("._fold"),this._$unfold=this._$el.find("._unfold"),this._$timer=this._$el.find("._timer")}},{key:"_activate",value:function(){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_activate",this).call(this),this._$bgColor.on("change",this._onChangeBgColor.bind(this)),this._$textSize.on("change",this._onChangeTextSize.bind(this)),this._$textColor.on("change",this._onChangeTextColor.bind(this))}},{key:"_onChangeBgColor",value:function(){var t=this._$bgColor.val();this._$bgColor.attr("data-value",t),this.emit("changeBgColor",t)}},{key:"_onChangeTextSize",value:function(){this.emit("changeTextSize",this._$textSize.val())}},{key:"_onChangeTextColor",value:function(){var t=this._$textColor.val();this._$textColor.attr("data-value",t),this.emit("changeTextColor",t)}},{key:"show",value:function(t){var i=t.offset,n=t.postit;r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this,{offset:i}),this.postitId=n.id,this.update(n)}},{key:"update",value:function(t){this._$textColor.val(t.textColor),this._$textSize.val(t.textSize),this._$bgColor.val(t.bgColor),this._$fold.toggle(!t.fold),this._$unfold.toggle(t.fold),this._$bgColor.attr("data-value",t.bgColor),this._$textColor.attr("data-value",t.textColor),this._$timer.is(":focus")||this._$timer.val(t.timer>0?t.timer:0)}},{key:"hide",value:function(){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"hide",this).call(this);var t=Number(this._$timer.val());this.emit("hide",this.postitId,t)}}]),e}();e.default=u},function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=s(i(3)),r=s(i(4));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(e){function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,o.default),n(i,[{key:"_init",value:function(){this._contextmenu=new r.default,this._draggingPostitId=null}},{key:"_caching",value:function(){this._$window=t(window),this._$document=t(document),this._$board=t("._postit_board").eq(0),this._template=t("script[type='text/x-postit-template']").text()}},{key:"_activate",value:function(){this._$board.on("contextmenu","._postit",this._onContextmenu.bind(this)).on("mousedown","._postit",this._onMousedownPostit.bind(this)).on("click","._toggle_btn",this._onClickFold.bind(this)).on("click","._remove_btn",this._onClickRemove.bind(this)).on("input","._text",this._onInputText.bind(this)).on("mousedown","._postit ._header",this._onMousedownHeader.bind(this)).on("mousedown","._postit ._text",this._onMousedownTextarea.bind(this)),this._contextmenu.on("fold",this._onFold.bind(this)).on("delete",this._onRemove.bind(this)).on("changeBgColor",this._onChangeBgColor.bind(this)).on("changeTextSize",this._onChangeTextSize.bind(this)).on("changeTextColor",this._onChangeTextColor.bind(this)).on("hide",this._onHideContextmenu.bind(this)),this._$window.on("resize",this._onResizeWindow.bind(this)).on("mousemove",this._onMousemoveWindow.bind(this)).on("mouseup",this._onMouseupWindow.bind(this))}},{key:"_onContextmenu",value:function(e){var i=t(e.currentTarget),n=Number(i.data("id")),o=this._getOffsetFromEvent(e);this.emit("contextmenu",o,n),e.preventDefault()}},{key:"openContextmenu",value:function(t,e){this._contextmenu.show({offset:t,postit:e})}},{key:"_find",value:function(t){var e=this._$board.find("._postit[data-id='"+t+"']");return e.length?e:null}},{key:"_create",value:function(e){return t(this._template).attr("data-id",e.id).appendTo(this._$board)}},{key:"_onMousedownPostit",value:function(e){var i=t(e.currentTarget),n=Number(i.data("id"));this.emit("toFront",n)}},{key:"_onClickFold",value:function(e){var i=t(e.target).closest("._postit").attr("data-id");this.emit("fold",i)}},{key:"_onClickRemove",value:function(e){var i=t(e.target).closest("._postit").attr("data-id");this.emit("remove",i)}},{key:"_onInputText",value:function(e){var i=t(e.target).closest("._postit").attr("data-id"),n=t(e.currentTarget).val();this.emit("changeText",i,n)}},{key:"_onFold",value:function(){var t=this._contextmenu.postitId;this.emit("fold",t)}},{key:"_onRemove",value:function(){var t=this._contextmenu.postitId;this.emit("remove",t)}},{key:"_onChangeBgColor",value:function(t){var e=this._contextmenu.postitId;this.emit("changeBgColor",e,t)}},{key:"_onChangeTextSize",value:function(t){var e=this._contextmenu.postitId;this.emit("changeTextSize",e,t)}},{key:"_onChangeTextColor",value:function(t){var e=this._contextmenu.postitId;this.emit("changeTextColor",e,t)}},{key:"_onHideContextmenu",value:function(t,e){e&&this.emit("setPostitTimer",t,e)}},{key:"_onResizeWindow",value:function(){var e=this;this._$board.find("._postit").each(function(i,n){e._adjustPosition(t(n))})}},{key:"_onMousedownTextarea",value:function(e){var i=t(e.currentTarget),n=i.closest("._postit");n.addClass("selected"),n.data({textareaWidth:parseInt(i.width(),10),textareaHeight:parseInt(i.height(),10)})}},{key:"_onMousedownHeader",value:function(e){var i=t(e.currentTarget).closest("._postit"),n=Number(i.data("id"));this._draggingPostitId=n,this._draggingStartPoint={left:parseInt(i.css("left"),10),top:parseInt(i.css("top"),10),clientX:e.clientX,clientY:e.clientY}}},{key:"_onMousemoveWindow",value:function(t){if(this._draggingPostitId){var e=t.clientX-(this._draggingStartPoint.clientX-this._draggingStartPoint.left),i=t.clientY-(this._draggingStartPoint.clientY-this._draggingStartPoint.top);this.emit("movePostit",this._draggingPostitId,e,i)}}},{key:"_onMouseupWindow",value:function(){var t=this._$board.find("._postit.selected");if(t.length){var e=t.find("._text"),i=e.width()-t.data("textareaWidth"),n=e.height()-t.data("textareaHeight"),o=t.attr("data-id");(i||n)&&(this.emit("resizePostit",o,i,n),this._adjustPosition(t)),t.removeClass("selected")}this._draggingPostitId&&(this._draggingPostitId=null)}},{key:"_adjustPosition",value:function(t){var e=t.attr("data-id"),i=this._$document.width(),n=this._$document.height(),o=t.width(),r=t.height(),s=parseInt(t.css("left"),10),a=parseInt(t.css("top"),10),u=Math.max(0,Math.min(s,i-o)),l=Math.max(0,Math.min(a,n-r));s===u&&a===l||this.emit("adjustPosition",e,u,l),this._adjustSize(t)}},{key:"_adjustSize",value:function(t){var e=t.attr("data-id"),i=this._$document.width(),n=this._$document.height(),o=t.width(),r=t.height();(o>i||r>n)&&this.emit("adjustSize",e,Math.min(o,i),Math.min(r,n))}},{key:"render",value:function(t){var e=this,i=this._find(t.id)||this._create(t),n=i.find("._text");n.val()!==t.text&&n.val(t.text),n.css({width:t.width-2,height:t.height-16,color:t.textColor,"font-size":t.textSize+"px"}),i.find("._remain_time").text("["+t.timer+"초 남음]").toggle(t.timer>=0),i.find("._title").text(t.text.trim().split("\n")[0]).css({color:t.textColor}),i.is(":visible")&&!this._draggingPostitId?i.stop(!0,!0).animate({left:t.left,top:t.top},100,function(){e._adjustPosition(i)}):(i.css({left:t.left,top:t.top}),this._adjustPosition(i)),t.timer&&this._contextmenu.isVisible()&&this._contextmenu.postitId===t.id&&this._contextmenu.update(t),i.css({"z-index":t.sort+1e3}).attr("data-bg-color",t.bgColor).toggleClass("fold",t.fold).show()}},{key:"empty",value:function(){this._$board.find("._postit").remove()}},{key:"remove",value:function(t){this._$board.find("._postit[data-id='"+t+"']").remove(),t===this._contextmenu.postitId&&this._contextmenu.hide()}},{key:"updateZindex",value:function(t){var e=this;t.forEach(function(t,i){e._$board.find("._postit[data-id='"+t+"']").css({"z-index":i+1e3})})}}]),i}();e.default=a}).call(this,i(0))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(2),s=(n=r)&&n.__esModule?n:{default:n};var a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,[{key:"_getOptions",value:function(){return{selector:"._global_contextmenu"}}}]),e}();e.default=a},function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=s(i(3)),r=s(i(6));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(e){function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,o.default),n(i,[{key:"_init",value:function(){this._contextmenu=new r.default}},{key:"_caching",value:function(){this._$el=t("._postit_board").eq(0)}},{key:"_activate",value:function(){this._$el.on("contextmenu",this._onContextmenu.bind(this)),this._contextmenu.on("create",this._onCreate.bind(this)).on("sort",this._onSort.bind(this)).on("empty",this._onEmpty.bind(this))}},{key:"_onContextmenu",value:function(t){this._$el.is(t.target)&&(this._contextmenu.show({offset:this._getOffsetFromEvent(t)}),t.preventDefault())}},{key:"_onCreate",value:function(){var t=this._contextmenu.getOffset();this.emit("create",t)}},{key:"_onSort",value:function(){var t={width:this._$el.width(),height:this._$el.height()};this.emit("sort",t)}},{key:"_onEmpty",value:function(){this.emit("empty")}}]),i}();e.default=a}).call(this,i(0))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o={text:"",textSize:12,textColor:"black",bgColor:"yellow",fold:!1,left:0,top:0,timer:-1,width:250,height:200},r=0,s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=this.id||e.id||(new Date).getTime(),this.sort=++r,Object.assign(this,o,e)}return n(t,[{key:"set",value:function(t){Object.assign(this,t)}},{key:"resetDefaultSize",value:function(){this.set({width:o.width,height:o.height})}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=s(i(1)),r=s(i(8));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._list=[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),n(e,[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],i=new r.default(t);this._list.push(i),this.save(),"function"==typeof e&&e(i)}},{key:"empty",value:function(t){this._list=[],this.save(),"function"==typeof t&&t()}},{key:"remove",value:function(t,e){var i=this.find(t);i&&(this._list.splice(this._list.indexOf(i),1),i._interval&&(clearInterval(i._interval),i._interval=null),this.save(),"function"==typeof e&&e())}},{key:"find",value:function(t){return this._list.find(function(e){return e.id===Number(t)})}},{key:"update",value:function(t,e){this.find(t).set(e),this.save()}},{key:"save",value:function(){localStorage.setItem("postits",JSON.stringify(this._list))}},{key:"load",value:function(){return JSON.parse(localStorage.getItem("postits"))}},{key:"toFront",value:function(t,e){var i=this.find(t),n=this._list.slice();n.sort(function(t,e){return t.sort-e.sort}),n.splice(n.indexOf(i),1),n.push(i),n.forEach(function(t,e){t.sort=e}),this.save(),"function"==typeof e&&e(n.map(function(t){return t.id}))}},{key:"sort",value:function(t,e){this._list.forEach(function(e,i){e.resetDefaultSize();var n=Math.min(t.width-e.width,t.height-e.height)-20,o=20*Math.floor(n/20),r=20*i,s=20*i;r=r%o+20*Math.floor(r/o),r%=20*Math.floor((t.width-e.width)/20),s%=o,e.left=r+20,e.top=s+20,e.sort=i}),this.save(),"function"==typeof e&&e(this._list)}}]),e}();e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._store=e,this._boardView=i,this._postitView=n,this._activate(),this._load()}return n(t,[{key:"_activate",value:function(){this._boardView.on("create",this._onCreate.bind(this)).on("sort",this._onSort.bind(this)).on("empty",this._onEmpty.bind(this)),this._postitView.on("fold",this._onFold.bind(this)).on("remove",this._onRemove.bind(this)).on("changeText",this._onChangeText.bind(this)).on("contextmenu",this._onContextmenu.bind(this)).on("changeBgColor",this._onChangeBgColor.bind(this)).on("changeTextSize",this._onChangeTextSize.bind(this)).on("changeTextColor",this._onChangeTextColor.bind(this)).on("setPostitTimer",this._onSetPostitTimer.bind(this)).on("adjustPosition",this._onAdjustPosition.bind(this)).on("adjustSize",this._onAdjustSize.bind(this)).on("toFront",this._onToFront.bind(this)).on("resizePostit",this._onResizePostit.bind(this)).on("movePostit",this._onMovePostit.bind(this))}},{key:"_load",value:function(){var t=this;(this._store.load()||[]).forEach(function(e){t._store.create(e,function(e){t._postitView.render(e),t._initPostitTimer(e.id,e.timer)})})}},{key:"_onCreate",value:function(t){var e=this;this._store.create({},function(i){e._store.update(i.id,{left:t.left,top:t.top}),e._postitView.render(i)})}},{key:"_onSort",value:function(t){var e=this;this._store.sort(t,function(t){return t.forEach(function(t){e._postitView.render(t)})})}},{key:"_onEmpty",value:function(){var t=this;this._store.empty(function(){t._postitView.empty()})}},{key:"_onFold",value:function(t){var e=this._store.find(t);this._store.update(t,{fold:!e.fold}),this._postitView.render(e)}},{key:"_onRemove",value:function(t){var e=this;this._store.remove(t,function(){e._postitView.remove(t)})}},{key:"_onChangeText",value:function(t,e){var i=this._store.find(t);i.text!==e&&(this._store.update(t,{text:e}),this._postitView.render(i))}},{key:"_onContextmenu",value:function(t,e){var i=this._store.find(e);this._postitView.openContextmenu(t,i)}},{key:"_onChangeBgColor",value:function(t,e){var i=this._store.find(t);this._store.update(t,{bgColor:e}),this._postitView.render(i)}},{key:"_onChangeTextSize",value:function(t,e){var i=this._store.find(t);this._store.update(t,{textSize:e}),this._postitView.render(i)}},{key:"_onChangeTextColor",value:function(t,e){var i=this._store.find(t);this._store.update(t,{textColor:e}),this._postitView.render(i)}},{key:"_onSetPostitTimer",value:function(t,e){this._initPostitTimer(t,e)}},{key:"_initPostitTimer",value:function(t,e){var i=this,n=this._store.find(t);!n||e<0||(n._interval&&(clearInterval(n._interval),n._interval=null),this._store.update(n.id,{timer:e}),this._postitView.render(n),n._interval=setInterval(function(){--e>=0&&(i._store.update(n.id,{timer:e}),i._postitView.render(n)),0===e&&(clearInterval(n._interval),n._interval=null,i._store.remove(n.id,function(){i._postitView.remove(n.id)}))},1e3))}},{key:"_onAdjustPosition",value:function(t,e,i){var n=this._store.find(t);this._store.update(t,{left:e,top:i}),this._postitView.render(n)}},{key:"_onAdjustSize",value:function(t,e,i){var n=this._store.find(t);this._store.update(t,{width:e,height:i}),this._postitView.render(n)}},{key:"_onToFront",value:function(t){var e=this;this._store.toFront(t,function(t){e._postitView.updateZindex(t)})}},{key:"_onResizePostit",value:function(t,e,i){var n=this._store.find(t);this._store.update(t,{width:n.width+e,height:n.height+i})}},{key:"_onMovePostit",value:function(t,e,i){var n=this._store.find(t);this._store.update(t,{left:e,top:i}),this._postitView.render(n)}}]),t}();e.default=o},function(t,e,i){"use strict";(function(t){var e=s(i(10)),n=s(i(9)),o=s(i(7)),r=s(i(5));function s(t){return t&&t.__esModule?t:{default:t}}t(function(){var t=new n.default,i=new o.default,s=new r.default;window.postitApp=new e.default(t,i,s)})}).call(this,i(0))}]);